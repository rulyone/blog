<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="en">

<head>
    <meta charset="UTF-8">
    <title>Quantum Entangled</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <link rel="stylesheet" th:href="@{/css/animations.css}" />
    <link rel="stylesheet" th:href="@{/css/code.css}" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="font-sans bg-gray-50 text-gray-900 mx-auto max-w-3xl p-4">
    <header
        class="sticky top-0 bg-gradient-to-r from-stone-100 to-neutral-100 z-50 p-6 shadow-lg border-b-2 border-blue-200">
        <h1
            class="text-4xl font-bold text-center mb-0 text-slate-800 flip-2-ver-left-fwd hover:text-blue-600 transition-colors duration-300">
            📝 Quantum Entangled
        </h1>
    </header>

    <div th:each="post : ${posts}">
        <article class="bg-white p-5 mb-6 rounded-lg shadow-sm">
            <a th:href="@{/viewpost/{id}/{slug}(id=${post.id}, slug=${post.slug})}"
                class="block no-underline text-inherit transition-colors duration-200 hover:text-blue-500">
                <h2 th:text="${post.title}"
                    class="text-3xl font-bold text-slate-800 mb-1 border-l-4 border-blue-500 pl-4 transition-all duration-200 hover:border-l-8 hover:text-blue-600 hover:pl-6">
                    Title</h2>
            </a>
            <div class="text-sm text-gray-500 mb-4 local-date" th:attr="data-time=${post.createdAt}"></div>
            <div class="leading-relaxed content" th:utext="${post.htmlContent}">Markdown rendered content</div>
        </article>
    </div>

    <!-- Authentication section -->
    <div sec:authorize="!isAuthenticated()" class="bg-white p-5 rounded-lg shadow-sm mb-6">
        <a th:href="@{/oauth2/authorization/github}"
            class="inline-flex items-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors">
            <img th:src="@{/img/github-mark-white.svg}" alt="" class="h-5 w-5 mr-2">
            <span>Login with GitHub</span>
        </a>
    </div>

    <div sec:authorize="isAuthenticated()" class="bg-white p-5 rounded-lg shadow-sm mb-6">
        <form th:action="@{/logout}" method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <button type="submit"
                class="px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors">Logout</button>
        </form>
    </div>

    <script th:src="@{/js/scripts.js}"></script>
</body>

</html>